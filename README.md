# Spring 6 Rest MVC

## Section 5: Project Lombok

Branches

- [01.project-lombok-pojos](https://github.com/sosercodes/spring-6-rest-mvc/tree/01.project-lombok-pojos)
- [02.project-lombok-builders](https://github.com/sosercodes/spring-6-rest-mvc/tree/02.project-lombok-builders)
- [03.project-lombok-constructors](https://github.com/sosercodes/spring-6-rest-mvc/tree/03.project-lombok-constructors)
- [04.project-lombok-logging](https://github.com/sosercodes/spring-6-rest-mvc/tree/04.project-lombok-logging)

## Section 6: Spring MVC Rest Services

Branches

- [05.spring-mvc-list-operation](https://github.com/sosercodes/spring-6-rest-mvc/tree/05.spring-mvc-list-operation)
- [06.spring-mvc-path-parameters-get-by-id](https://github.com/sosercodes/spring-6-rest-mvc/tree/06.spring-mvc-path-parameters-get-by-id)
- [07.spring-mvc-assignment-get-customer](https://github.com/sosercodes/spring-6-rest-mvc/tree/07.spring-mvc-assignment-get-customer)
- [09.spring-mvc-http-post-with-spring-mvc](https://github.com/sosercodes/spring-6-rest-mvc/tree/09.spring-mvc-http-post-with-spring-mvc)
- [11.spring-mvc-assignment-http-post](https://github.com/sosercodes/spring-6-rest-mvc/tree/11.spring-mvc-assignment-http-post)
- [12.spring-mvc-http-put](https://github.com/sosercodes/spring-6-rest-mvc/tree/12.spring-mvc-http-put)
- [13.spring-mvc-assignment-http-put](https://github.com/sosercodes/spring-6-rest-mvc/tree/13.spring-mvc-assignment-http-put)
- [14.spring-mvc-http-delete](https://github.com/sosercodes/spring-6-rest-mvc/tree/14.spring-mvc-http-delete)
- [15.spring-mvc-assignment-http-delete](https://github.com/sosercodes/spring-6-rest-mvc/tree/15.spring-mvc-assignment-http-delete)
- [16.spring-mvc-http-patch](https://github.com/sosercodes/spring-6-rest-mvc/tree/16.spring-mvc-http-patch)
- [17.spring-mvc-assignment-http-patch](https://github.com/sosercodes/spring-6-rest-mvc/tree/17.spring-mvc-assignment-http-patch)
- [18.mock-mvc-configuration](https://github.com/sosercodes/spring-6-rest-mvc/tree/18.mock-mvc-configuration)
- [19.mock-mvc-return-data-with-mockito](https://github.com/sosercodes/spring-6-rest-mvc/tree/19.mock-mvc-return-data-with-mockito)
- [20.mock-mvc-using-json-matchers](https://github.com/sosercodes/spring-6-rest-mvc/tree/20.mock-mvc-using-json-matchers)
- [21.mock-mvc-test-list-beers](https://github.com/sosercodes/spring-6-rest-mvc/tree/21.mock-mvc-test-list-beers)
- [22.mock-mvc-assignment-test-get-customer](https://github.com/sosercodes/spring-6-rest-mvc/tree/22.mock-mvc-assignment-test-get-customer)
- [23.mock-mvc-create-json-jackson](https://github.com/sosercodes/spring-6-rest-mvc/tree/23.mock-mvc-create-json-jackson)
- [24.mock-mvc-test-create-beer](https://github.com/sosercodes/spring-6-rest-mvc/tree/24.mock-mvc-test-create-beer)
- [25.mock-mvc-assignment-test-create-customer](https://github.com/sosercodes/spring-6-rest-mvc/tree/25.mock-mvc-assignment-test-create-customer)
- [26.mock-mvc-test-update-beer](https://github.com/sosercodes/spring-6-rest-mvc/tree/26.mock-mvc-test-update-beer)
- [27.mock-mvc-assignment-test-update-customer](https://github.com/sosercodes/spring-6-rest-mvc/tree/27.mock-mvc-assignment-test-update-customer)
- [28.mock-mvc-test-delete-beer](https://github.com/sosercodes/spring-6-rest-mvc/tree/28.mock-mvc-test-delete-beer)
- [29.mock-mvc-assignment-test-delete-customer](https://github.com/sosercodes/spring-6-rest-mvc/tree/29.mock-mvc-assignment-test-delete-customer)
- [30.mock-mvc-test-patch-beer](https://github.com/sosercodes/spring-6-rest-mvc/tree/30.mock-mvc-test-patch-beer)
- [31.mock-mvc-assignment-test-patch-customer](https://github.com/sosercodes/spring-6-rest-mvc/tree/31.mock-mvc-assignment-test-patch-customer)
- [32.mock-mvc-dry-refactoring](https://github.com/sosercodes/spring-6-rest-mvc/tree/32.mock-mvc-dry-refactoring)
- [33.mock-mvc-uri-builder](https://github.com/sosercodes/spring-6-rest-mvc/tree/33.mock-mvc-uri-builder)


## Section 7: Spring MockMVC Test with Mockito

Branches

- [18.mock-mvc-configuration](https://github.com/sosercodes/spring-6-rest-mvc/tree/18.mock-mvc-configuration)
- [19.mock-mvc-return-data-with-mockito](https://github.com/sosercodes/spring-6-rest-mvc/tree/19.mock-mvc-return-data-with-mockito)
- [20.mock-mvc-using-json-matchers](https://github.com/sosercodes/spring-6-rest-mvc/tree/20.mock-mvc-using-json-matchers)
- [21.mock-mvc-test-list-beers](https://github.com/sosercodes/spring-6-rest-mvc/tree/21.mock-mvc-test-list-beers)
- [22.mock-mvc-assignment-test-get-customer](https://github.com/sosercodes/spring-6-rest-mvc/tree/22.mock-mvc-assignment-test-get-customer)
- [23.mock-mvc-create-json-jackson](https://github.com/sosercodes/spring-6-rest-mvc/tree/23.mock-mvc-create-json-jackson)
- [24.mock-mvc-test-create-beer](https://github.com/sosercodes/spring-6-rest-mvc/tree/24.mock-mvc-test-create-beer)
- [25.mock-mvc-assignment-test-create-customer](https://github.com/sosercodes/spring-6-rest-mvc/tree/25.mock-mvc-assignment-test-create-customer)
- [26.mock-mvc-test-update-beer](https://github.com/sosercodes/spring-6-rest-mvc/tree/26.mock-mvc-test-update-beer)
- [27.mock-mvc-assignment-test-update-customer](https://github.com/sosercodes/spring-6-rest-mvc/tree/27.mock-mvc-assignment-test-update-customer)
- [28.mock-mvc-test-delete-beer](https://github.com/sosercodes/spring-6-rest-mvc/tree/28.mock-mvc-test-delete-beer)
- [29.mock-mvc-assignment-test-delete-customer](https://github.com/sosercodes/spring-6-rest-mvc/tree/29.mock-mvc-assignment-test-delete-customer)
- [30.mock-mvc-test-patch-beer](https://github.com/sosercodes/spring-6-rest-mvc/tree/30.mock-mvc-test-patch-beer)
- [31.mock-mvc-assignment-test-patch-customer](https://github.com/sosercodes/spring-6-rest-mvc/tree/31.mock-mvc-assignment-test-patch-customer)
- [32.mock-mvc-dry-refactoring](https://github.com/sosercodes/spring-6-rest-mvc/tree/32.mock-mvc-dry-refactoring)
- [33.mock-mvc-uri-builder](https://github.com/sosercodes/spring-6-rest-mvc/tree/33.mock-mvc-uri-builder)


## Section 8: Exception Handling with Spring MVC

HTTP offers the following Status Codes.

- 100 Series - Informational Responses
- 200 Series - Successful Responses
- 300 Series - Redirection Responses
- 400 Series - Client Error Responses
- 500 Series - Server Error Responses

Use of HTTP Status Codes

- 200 Series are used when the request completes as expected
    - Common codes used: 200 Ok, 201 Created, 202 Accepted, 204 No Content
- 400 Series are used when the request is understood but fails an expected condition
    - 400 Bad Request - Invalid data received
    - 401 Unauthorized - User authentication required
    - 403 Forbidden - User authenticated, not authorized
    - 404 Not Found - Requested Resource Not Found
- 500 Series are used when there is a server side error
    - Typically from unexpected runtime errors
    - Null Pointer Errors, parse errors, database connection errors, etc
  
Branches

- [34.handling-exceptions-custom-exception-with-mockito](https://github.com/sosercodes/spring-6-rest-mvc/tree/34.handling-exceptions-custom-exception-with-mockito)
- [35.handling-exceptions-using-exception-handler](https://github.com/sosercodes/spring-6-rest-mvc/tree/35.handling-exceptions-using-exception-handler)
- [36.handling-exceptions-controller-advice](https://github.com/sosercodes/spring-6-rest-mvc/tree/36.handling-exceptions-controller-advice)
- [37.handling-exceptions-using-responsestatus-annotation](https://github.com/sosercodes/spring-6-rest-mvc/tree/37.handling-exceptions-using-responsestatus-annotation)
- [38.handling-exceptions-using-java-optional](https://github.com/sosercodes/spring-6-rest-mvc/tree/38.handling-exceptions-using-java-optional)


## Section 9: Spring Data JPA with Spring MVC

Branches

- [39.refactoring-to-dtos](https://github.com/sosercodes/spring-6-rest-mvc/tree/39.refactoring-to-dtos)
- [40.spring-data-jpa-dependencies](https://github.com/sosercodes/spring-6-rest-mvc/tree/40.spring-data-jpa-dependencies)
- [41.creating-jpa-entities](https://github.com/sosercodes/spring-6-rest-mvc/tree/41.creating-jpa-entities)
- [42.hibernate-uuid-id-generation](https://github.com/sosercodes/spring-6-rest-mvc/tree/42.hibernate-uuid-id-generation)
- [43.spring-data-jpa-repositories](https://github.com/sosercodes/spring-6-rest-mvc/tree/43.spring-data-jpa-repositories)
- [44.spring-boot-jpa-test-splice](https://github.com/sosercodes/spring-6-rest-mvc/tree/44.spring-boot-jpa-test-splice)
- [45.mapstruct-dependencies-and-configuration](https://github.com/sosercodes/spring-6-rest-mvc/tree/45.mapstruct-dependencies-and-configuration)
- [46.mapstruct-mappers](https://github.com/sosercodes/spring-6-rest-mvc/tree/46.mapstruct-mappers)
- [47.assignment-populate-test-data](https://github.com/sosercodes/spring-6-rest-mvc/tree/47.assignment-populate-test-data)
- [48.jpa-services](https://github.com/sosercodes/spring-6-rest-mvc/tree/48.jpa-services)
- [49.jpa-get-operations](https://github.com/sosercodes/spring-6-rest-mvc/tree/49.jpa-get-operations)
- [50.controller-integration-test](https://github.com/sosercodes/spring-6-rest-mvc/tree/50.controller-integration-test)
- [51.testing-for-expected-exceptions](https://github.com/sosercodes/spring-6-rest-mvc/tree/51.testing-for-expected-exceptions)
- [52.assignment-implement-customer-get-operations](https://github.com/sosercodes/spring-6-rest-mvc/tree/52.assignment-implement-customer-get-operations)
- [53.jpa-save-new-beer-operation](https://github.com/sosercodes/spring-6-rest-mvc/tree/53.jpa-save-new-beer-operation)
- [54.jpa-update-beer-by-id-operation](https://github.com/sosercodes/spring-6-rest-mvc/tree/54.jpa-update-beer-by-id-operation)
- [55.jpa-update-beer-not-found](https://github.com/sosercodes/spring-6-rest-mvc/tree/55.jpa-update-beer-not-found)
- [56.jpa-delete-beer-by-id](https://github.com/sosercodes/spring-6-rest-mvc/tree/56.jpa-delete-beer-by-id)
- [57.jpa-delete-by-id-not-found](https://github.com/sosercodes/spring-6-rest-mvc/tree/57.jpa-delete-by-id-not-found)
- [58.assignment-17-implement-customer-jpa](https://github.com/sosercodes/spring-6-rest-mvc/tree/58.assignment-17-implement-customer-jpa)

## Section 10: Data Validation with Spring

Spring Boot provides robust support for validation using the Bean Validation API.

- It offers Controller Binding Validation using `@Validated`.
- You can create a custom validation handler to tell the user what the reason is why the request failed.

To validate POST requests in a Spring Boot REST API, you can use the following approach:

1. Add the validation dependency to your project
2. Use validation annotations on your request body class
3. Add the `@Valid` annotation to your controller method
4. Handle validation errors by creating a global exception handler which tells you what has gone wrong

But we should have the same validation at the database level as well! See JPA Validation.

Branches

- [59.validation-maven-dependencies](https://github.com/sosercodes/spring-6-rest-mvc/tree/59.validation-maven-dependencies)
- [60.controller-binding-validation](https://github.com/sosercodes/spring-6-rest-mvc/tree/60.controller-binding-validation)
- [61.custom-validation-handler](https://github.com/sosercodes/spring-6-rest-mvc/tree/61.custom-validation-handler)
- [62.custom-error-body](https://github.com/sosercodes/spring-6-rest-mvc/tree/62.custom-error-body)
- [63.assignment-18-complete-beer-validation](https://github.com/sosercodes/spring-6-rest-mvc/tree/63.assignment-18-complete-beer-validation)
- [64.jpa-validation](https://github.com/sosercodes/spring-6-rest-mvc/tree/64.jpa-validation)
- [65.database-constraint-validation](https://github.com/sosercodes/spring-6-rest-mvc/tree/65.database-constraint-validation)
- [66.controller-testing-with-jpa](https://github.com/sosercodes/spring-6-rest-mvc/tree/66.controller-testing-with-jpa)
- [67.jpa-validation-error-handler](https://github.com/sosercodes/spring-6-rest-mvc/tree/67.jpa-validation-error-handler)
- [68.jpa-validation-error-message](https://github.com/sosercodes/spring-6-rest-mvc/tree/68.jpa-validation-error-message)


## Section 11: MySQL with Spring Boot

Adds _MySQL_ to store the _Beer_ in a _Real Database_.

In contrast to the original project, this version uses _Testcontainers_ and removes _H2_.
So you have to install _Docker Desktop_ to start and test the application.

Branches

- [69.mysql-configuration](https://github.com/sosercodes/spring-6-rest-mvc/tree/69.mysql-configuration)
- [70.jpa-updates-for-mysql](https://github.com/sosercodes/spring-6-rest-mvc/tree/70.jpa-updates-for-mysql)
- [71.use-testcontainers](https://github.com/sosercodes/spring-6-rest-mvc/tree/71.use-testcontainers)
- [75.schema-script-generation](https://github.com/sosercodes/spring-6-rest-mvc/tree/75.schema-script-generation)

## Section 12: Flyway Migrations

Uses Flyway to update/change the database if an _Entity_ changes.

_Flyway Scripts_ follow the a naming schema `V1__init-mysql-database.sql`.
Spring Boot searches for them in a folder `/src/main/recourses/csvdata/db/migration'.

Branches

- [76.flyway-dependencies](https://github.com/sosercodes/spring-6-rest-mvc/tree/76.flyway-dependencies)

## Section 13:Using Test Containers with Spring Boot

The the Spring Boot 3.1.0 release added some nice support for using Test Containers and Docker Compose. These features add nice Docker integration for running Docker containers with tests, or Docker Compose scripts are runtime.
You'll find this new content with the MySQL and MongoDB sections of the course.

Adds support for TestContainers - see .

>_**Note:**_ I've added support for Testcontainers in _Section 11: MySQL with Spring Boot_ - see [71.use-testcontainers](https://github.com/sosercodes/spring-6-rest-mvc/tree/71.use-testcontainers) _before_ SFG added the new section about Testcontainers!

>_**Note:**_ _Section 17: Database Relationship Mappings_ synchronizes to SFG and adds the source for new _Section 13: Testcontainers_ - see  [109.optimistic-locking-demo-sync](https://github.com/sosercodes/spring-6-rest-mvc/tree/109.optimistic-locking-demo-sync).

Branches
-  [109.optimistic-locking-demo-sync](https://github.com/sosercodes/spring-6-rest-mvc/tree/109.optimistic-locking-demo-sync)

## Section 14: CSV File Uploads

Doesn't _Upload_ Files but adds lots of _Data_ to our App using a _CSV File_ `/src/main/recourses/csvdata/beers.csv` which will be .

Adds `BeerCsvService` and `BeerCsvServiceImplTest`, which loads the CSV file and tests if it works correctly.

Branches

- [79.beer-csv-data](https://github.com/sosercodes/spring-6-rest-mvc/tree/79.beer-csv-data)
- [80.beer-csv-pojo](https://github.com/sosercodes/spring-6-rest-mvc/tree/80.beer-csv-pojo)
- [81.mapping-with-opencsv](https://github.com/sosercodes/spring-6-rest-mvc/tree/81.mapping-with-opencsv)
- [82.csv-parse-service](https://github.com/sosercodes/spring-6-rest-mvc/tree/82.csv-parse-service)
- [84.hibernate-create-and-update-timestamp](https://github.com/sosercodes/spring-6-rest-mvc/tree/84.hibernate-create-and-update-timestamp)
- [85-beer-csv-fix-integration-tests](https://github.com/springframeworkguru/spring-6-rest-mvc/tree/85-beer-csv-fix-integration-tests)

## Section 15: Query Parameters with Spring MVC

Adds _Query Parameters_ to the `BeerController`. Get all `Beer` with `lager` in the name.

```bash
curl -s "localhost:8080/api/v1/beer?beerName=lager" | jq
```

Branch

- [86.list-beers-spring-mvc-test](https://github.com/sosercodes/spring-6-rest-mvc/tree/86.list-beers-spring-mvc-test)
- [87.capture-query-parameters](https://github.com/sosercodes/spring-6-rest-mvc/tree/87.capture-query-parameters)
- [88.update-service-query-parameter](https://github.com/sosercodes/spring-6-rest-mvc/tree/88.update-service-query-parameter)
- [89.beer-csv-pojo](https://github.com/sosercodes/spring-6-rest-mvc/tree/89.beer-csv-pojo)
- [89.refactor-service-conditional-logic](https://github.com/sosercodes/spring-6-rest-mvc/tree/89.refactor-service-conditional-logic)
- [90.find-by-name-spring-data-jpa](https://github.com/sosercodes/spring-6-rest-mvc/tree/90.find-by-name-spring-data-jpa)
- [91.complete-implementation](https://github.com/sosercodes/spring-6-rest-mvc/tree/91.complete-implementation)
- [93.complete-search-functionality](https://github.com/sosercodes/spring-6-rest-mvc/tree/93.complete-search-functionality)


## Section 16: Paging and Sorting

Branch 

- [94.add-paging-parameter](https://github.com/sosercodes/spring-6-rest-mvc/tree/94.add-paging-parameter)
- [96.refactor-spring-data-jpa-repositories](https://github.com/sosercodes/spring-6-rest-mvc/tree/96.refactor-spring-data-jpa-repositories)
- [97.add-sort-parameter](https://github.com/sosercodes/spring-6-rest-mvc/tree/97.add-sort-parameter)

Use the following `curl` command to get a _Beer_.

```bash
curl -s "localhost:8080/api/v1/beer?pageNumber=1&pageSize=1" | jq
{
  "content": [
    {
      "id": "38ffc38d-f083-4ba3-8fba-9f0acb389f2d",
      "version": 0,
      "beerName": "#001 Golden Amber Lager",
      "beerStyle": "PILSNER",
      "upc": "2382",
      "quantityOnHand": 2382,
      "price": 10.00,
      "createdDate": "2024-10-16T20:37:33.303497",
      "updateDate": "2024-10-16T20:37:33.303497"
    }
  ],
  "pageable": {
    "pageNumber": 0,
    "pageSize": 1,
    "sort": {
      "empty": false,
      "unsorted": false,
      "sorted": true
    },
    "offset": 0,
    "unpaged": false,
    "paged": true
  },
  "last": false,
  "totalPages": 2413,
  "totalElements": 2413,
  "first": true,
  "size": 1,
  "number": 0,
  "sort": {
    "empty": false,
    "unsorted": false,
    "sorted": true
  },
  "numberOfElements": 1,
  "empty": false
}
```

References

- [Mkyong - Spring Data JPA Paging and Sorting example](https://mkyong.com/spring-boot/spring-data-jpa-paging-and-sorting-example/)
- [BezKoder - Spring Boot Pagination & Filter example | Spring JPA, Pageable](https://www.bezkoder.com/spring-boot-pagination-filter-jpa-pageable/)
- [Dan Vega - Spring Data JPA Pagination - Youtube](https://www.youtube.com/watch?v=oq-c3D67WqM)
- [Dan Vega - Spring Data JPA Pagination](https://www.danvega.dev/blog/spring-data-jpa-pagination)

## Section 17: Database Relationship Mappings

- Adds new Migration Script, that adds _BeerOrder_ and _BeerOrderLine_.
- Creates new Entities `BeerOrder` and `BeerOrderLine` and updates `Customer`.
- Updates `BeerOrderLine` and adds One-To-Many Relationships.
- Creates `BeerOrderRepository` and `BeerOrderRepositoryTest`.
- Creates a new entity `Category` and a Many-To-Many Mapping to `Beer`.
- Adds `BeerOrderShipment` and One-To-One Relationship from `BeerOrder` to `BeerOrderShipment`. But don't do it like he does! Use Unidirectional Mapping. See Referneces!
- Show how to add `CascadeType.PERSIST` to `BeerOrderShipment` in `BeerOrder`.

>_**Note:**_ `109.optimistic-locking-demo-sync` synchronizes to SFG after he added new _Section 13: Testcontainers_.
Branches

- [98.create-migration-script](https://github.com/sosercodes/spring-6-rest-mvc/tree/98.create-migration-script)
- [99.add-flyway-migration-script](https://github.com/sosercodes/spring-6-rest-mvc/tree/99.add-flyway-migration-script)
- [100.one-to-many-bidirectional](https://github.com/sosercodes/spring-6-rest-mvc/tree/100.one-to-many-bidirectional)
- [101.assignment-one-to-many](https://github.com/sosercodes/spring-6-rest-mvc/tree/101.assignment-one-to-many)
- [102.create-beer-order-repository](https://github.com/sosercodes/spring-6-rest-mvc/tree/102.create-beer-order-repository)
- [105.many-to-many](https://github.com/sosercodes/spring-6-rest-mvc/tree/105.many-to-many) from `Beer` to `Category`
- [107.one-to-one-bi-directional](https://github.com/sosercodes/spring-6-rest-mvc/tree/107.one-to-one-bi-directional) from `Beer` to `Category`
- [108.cascade-on-persist](https://github.com/sosercodes/spring-6-rest-mvc/tree/108.cascade-on-persist) from `Beer` to `Category`
- [109.optimistic-locking-demo](https://github.com/sosercodes/spring-6-rest-mvc/tree/109.optimistic-locking-demo)
- [109.optimistic-locking-demo-sync](https://github.com/sosercodes/spring-6-rest-mvc/tree/109.optimistic-locking-demo-sync)

References

- [Thorben Janssen - Hibernate Tip: How to Share the Primary Key in a One-to-One Association](https://www.youtube.com/watch?v=t9jdfQqmTVU).
- [The best way to map a @OneToOne relationship with JPA and Hibernate](https://www.youtube.com/watch?v=GRV69QNSdVg)

## Section 22: Spring Security HTTP Basic Auth

Basic Auth default with username `user` and the password you find in the console:

```bash
curl -u user:password  http://localhost:8080/api/v1/beer | jq
```


Branches

- [110.adding-spring-security-dependencies](https://github.com/sosercodes/spring-6-rest-mvc/tree/110.adding-spring-security-dependencies)
- [111.customizing-user-name-and-password](https://github.com/sosercodes/spring-6-rest-mvc/tree/111.customizing-user-name-and-password)
- [112.testing-spring-security-with-junit-5](https://github.com/sosercodes/spring-6-rest-mvc/tree/112.testing-spring-security-with-junit-5)
- [113.spring-security-config-disable-csrf](https://github.com/sosercodes/spring-6-rest-mvc/tree/113.spring-security-config-disable-csrf)
- [114.assignment-complete-update-of-tests](https://github.com/sosercodes/spring-6-rest-mvc/tree/114.assignment-complete-update-of-tests)
- [115.spring-security-with-web-application-context](https://github.com/sosercodes/spring-6-rest-mvc/tree/115.spring-security-with-web-application-context)
- [116.assignment-25-assn-fix-remaining-tests](https://github.com/sosercodes/spring-6-rest-mvc/tree/116.assignment-25-assn-fix-remaining-tests)
- 




